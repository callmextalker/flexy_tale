<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexy tale - 동화가 이어질 수 있게 도와주세요!</title>
    <link rel="stylesheet" href="node_modules/animate.css/animate.min.css">
    <link href='https://fonts.googleapis.com/css?family=PT+Sans|Fredoka+One|Source+Code+Pro' rel='stylesheet' type='text/css'>
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    
    <div class="wrap">
        <div class="header">
            <br>
            <h1 class="title">Flexy tale &nbsp;</h1> 
            <br>
                <p class="note"> 
                    어느 겨울날 눈처럼 하얀 피부, 창틀처럼 새까만 머리카락, 핏방울처럼 붉은 입술을 가진 예쁜 여자아이가 태어났어요. 왕은 그 모습이 하얀 눈을 닮았다고 해서 아이에게 백설 공주라 이름 붙였답니다. (justify-content 속성을 이용하여 왕에게 아기 백설공주를 안겨주세요.)
                    <br><br>
                    center : 요소를 컨테이너의 가운데로 정렬합니다. <br>
                    flex-end : 요소를 컨테이너의 오른쪽으로 정렬합니다. <br>
                    space-between : 요소들 사이에 동일한 간격을 둡니다. <br>
                    <br>
                    예를 들자면, justify-content : center 는 백설공주를 가운데로 이동시킵니다.
                </p>
            <br>         
        </div>
        
        <div id="view">
            <div id="board">
                <div id="pond" class="pond">
                    <div>
                        <img id="father1" class="father1" src="../img/firstlevel/firstlevel-father-100.png" style="width: 580px; height: 650px;">
                        <img id="father2" class="father2" src="../img/firstlevel/firstlevel-father-300.png" style="width: 530px; height: 630px;">
                        <img id="daughter" class="daughter" src="../img/firstlevel/firstlevel-daughter-200.png" style="width: 350px; height: 300px;">
                    </div>
                </div>
                <div id="background"></div>
            </div>
        </div>

        <div id="help">
            <div id="">

            </div>
        </div>
        <div id="editor">
            <div id="css">
                <div class="line-numbers">1<br>2<br>3<br>4<br>5<div id="add-numbers"></div></div>
                <pre id="before"></pre>
                <p class="back_code">#background {
  display: flex;</p>
                <textarea id="code" class="code-class" autofocus autocapitalize="none"></textarea>
                <p class="back_code"></p>}</p>
                <pre id="after"></pre>
                <button id="next" class="translate">Next</button>
            </div>
            <div class="bsa-custom"></div>
        </div>
        <div id="button">
            <div class="button-color">
                <button id="center" class="btn">center</button>
                <button id="flex-end" class="btn">flex-end</button>
                <button id="flex-start" class="btn">flex-start</button>
            </div>
            <div>
                <button id="next-button">
                    <svg>
                        <polyline
                        points="3,15 43,55 3,95" 
                        fill="none" stroke="#949EB9" stroke-width="6" style="stroke-opacity: .6; position:absolute; left:0;"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="level-nav">
            <a class="previous" href="#"></a>
            <a class="next" href="#"></a>
        </div>

    </div> <!--wrap 끝나는 div -->

    <!--flexytale설명 팝업-->
    <div id="popup" href="javascript:popup()" target="_blank">
        <div class="pop_inner">
            <h5>flexy tale에 오신 여러분 환영합니다.</h5>
            <p class="text">
                <br>
                flexytale은 css의 속성 중 하나인 flex를 익힐 수 있는 게임입니다.<br>
                백설공주의 이야기를 함께 완성해가며 flex속성을 배워봅시다.<br>
                <br>
            </p>
            <div class="example-wrap">
                <img id="DD" src="../img/n_dwarf.png" style="width: 200px; height: 200px;">
                <div style="position: absolute;">
                    <img src="../img/n_dwarf.png" style="width: 200px; height: 200px;opacity:0.5;float:left;">
                    <img src="../img/arrow.png" id="example-arrow" >
                </div>
            </div>
            
            <p class="text">justify-content:flex-end;</p>
            <button type="button" class="btn_flex-end">FLEX-END</button>
            <button type="button" class="btn_close">CLOSE</button>
        </div>
    </div>

    <!--배경-->
    <div class="black_bg"></div>
    <div class="background"><img src="../img/background.jpg" alt=""></div>
</body>
</html>
<script>
//flexytale설명 팝업//
    $(".btn_flex-end").click(function(){
        $("#DD").css("right", "0px");
        $(".btn_flex-end").css('display', 'none');
        $(".btn_close").css("display","inline-block");
        $("#example-arrow").css("animation-iteration-count", "0");
    });
    $(".btn_close").click(function(){
        $("#popup").hide();
    });
//코드 치기//
    function addLineNumbers() {
        const LineNumbers = document.getElementById('add-numbers');
        LineNumbers.innerHTML += numbers +'<br>';
        return -1;
    }
    function countChildElement() {
        const ele = document.getElementById('add-numbers');
        let eleCount = ele.childElementCount;
        return eleCount;
    }
//main//
    $('#code').focus();
    let numbers = 6;

    $("#code").on("change keyup paste", function() {
        let height =document.getElementById('code').offsetHeight;
        let textarea = document.getElementById('code').value;
        if (window.event.keyCode == 13)
        {
            addLineNumbers();
            numbers = 6 + countChildElement();
            console.log(textarea);
            console.log(numbers);
            document.getElementById("code").style.height = height + 24 +'px';
        }
    });

    //level//
    let textarea = document.getElementById('code').value;
    
    //firstlevel
    $("#code").on("propertychange change keyup paste input", function() {
        let currentVal = $(this).val();
        if((currentVal.includes('flex-direction: row-reverse;'))&&(!document.querySelector('.pond').classList.contains('fourth-flex-direction')))
        {
            document.getElementById('pond').className += ' fourth-flex-direction';
        }
        if((currentVal.includes('justify-content : space-between;'))&&(!document.querySelector('.pond').classList.contains('fourth-justify-content')))
        {
            document.getElementById('pond').className += ' fourth-justify-content';
        }
        //지우면 삭제
        if((!currentVal.includes('flex-direction: row-reverse;'))&&(document.querySelector('.pond').classList.contains('fourth-flex-direction')))
        {
            document.getElementById('pond').className='pond';
        }
        if((!currentVal.includes('justify-content : space-between;'))&&(document.querySelector('.pond').classList.contains('fourth-justify-content')))
        {
            document.getElementById('pond').className='pond';
        }

    });




</script>
