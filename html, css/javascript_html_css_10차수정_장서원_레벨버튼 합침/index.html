<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexy tale - 동화가 이어질 수 있게 도와주세요!</title>
    <link rel="stylesheet" href="node_modules/animate.css/animate.min.css">
    <link href='https://fonts.googleapis.com/css?family=PT+Sans|Fredoka+One|Source+Code+Pro' rel='stylesheet' type='text/css'>
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    
    <div class="wrap">
        <div class="header">
            <br>
            <h1 class="title">Flexy tale &nbsp;</h1> 
            <br>
                <p class="note"> 
                    flexy tale에 오신 여러분 환영합니다. <br>
                    flexy tale은 여러 동화의 주인공들에게 도움을 주며 스토리를 진행해가는 CSS 코드 게임입니다. <br>
                    <br>
                    첫 번째 동화인 '백설공주'의 이야기를 justify-content 속성을 이용하여 완성할 수 있도록 도와주세요. <br>
                    <br>
                    center : 요소를 컨테이너의 가운데로 정렬합니다. <br>
                    flex-end : 요소를 컨테이너의 오른쪽으로 정렬합니다. <br>
                    space-between : 요소들 사이에 동일한 간격을 둡니다. <br>
                    <br>
                    예를 들자면, justify-content : center 는 백설공주를 가운데로 이동시킵니다.
                </p>
            <br>         
        </div>

        <div id="view">
            <div id="board">
                <div id="pond" class="pond">
                    <img id="a-dwraf" class= "dwarf" src="img\fourthlevel\a_dwarf.png">
                    <img id="n-dwarf-2" class= "dwarf" src="img\fourthlevel\n_dwarf.png">
                    <img id="n-dwarf" class= "dwarf" src="img\fourthlevel\n_dwarf.png">
                    
                </div>
                <div id="background"></div>
            </div>
        </div>

        <div id="help">
            <div id="">

            </div>
        </div>
        <div id="editor">
            <div id="css">
                <div class="line-numbers">1<br>2<br>3<br>4<br>5<div id="add-numbers"></div></div>
                <pre id="before"></pre>
                <p class="back_code">#background {
  display: flex;
  justify-content: flex-end;</p>
                <textarea id="code" class="code-class" autofocus autocapitalize="none"></textarea>
                <p class="back_code"></p>}</p>
                <pre id="after"></pre>
                <button id="next" class="translate">Next</button>
            </div>
            <div class="bsa-custom"></div>
        </div>
        <div id="button">
            <div class="button-color">
                <button id="center" class="btn">center</button>
                <button id="flex-end" class="btn">flex-end</button>
                <button id="flex-start" class="btn">flex-start</button>
            </div>
            <div>
                <button id="next-button">
                    <svg>
                        <polyline
                        points="3,15 43,55 3,95" 
                        fill="none" stroke="#949EB9" stroke-width="6" style="stroke-opacity: .6; position:absolute; left:0;"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="level-nav">
            <a class="previous" href="#"></a>
            <a class="next" href="#"></a>
        </div>

    </div> <!--wrap 끝나는 div -->
    <div class="bg"></div>
</body>
</html>
<script>

    function addLineNumbers() {
        const LineNumbers = document.getElementById('add-numbers');
        LineNumbers.innerHTML += numbers +'<br>';
        return -1;
    }
    function countChildElement() {
        const ele = document.getElementById('add-numbers');
        let eleCount = ele.childElementCount;
        return eleCount;
    }
//main//
    $('#code').focus();
    let numbers = 6;

    $("#code").on("change keyup paste", function() {
        let height =document.getElementById('code').offsetHeight;
        let textarea = document.getElementById('code').value;
        if (window.event.keyCode == 13)
        {
            addLineNumbers();
            numbers = 6 + countChildElement();
            console.log(textarea);
            console.log(numbers);
            document.getElementById("code").style.height = height + 24 +'px';
        }
    });

    //fourthlevel
    let textarea = document.getElementById('code').value;
    
    $("#code").on("propertychange change keyup paste input", function() {
        let currentVal = $(this).val();
        if((currentVal.includes('flex-direction: row-reverse;'))&&(!document.querySelector('.pond').classList.contains('fourth-flex-direction')))
        {
            document.getElementById('pond').className += ' fourth-flex-direction';
        }
        if((currentVal.includes('justify-content : space-between;'))&&(!document.querySelector('.pond').classList.contains('fourth-justify-content')))
        {
            document.getElementById('pond').className += ' fourth-justify-content';
        }
        //지우면 삭제
        if((!currentVal.includes('flex-direction: row-reverse;'))&&(document.querySelector('.pond').classList.contains('fourth-flex-direction')))
        {
            document.getElementById('pond').className='pond';
        }
        if((!currentVal.includes('justify-content : space-between;'))&&(document.querySelector('.pond').classList.contains('fourth-justify-content')))
        {
            document.getElementById('pond').className='pond';
        }

    });




</script>